/*!
 * simulation-scroll-y.min.js v1.0.2
 * (c) 2017 HcySunYang
 * Released under the MIT License.
 */!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.simulationScrollY=n()}(this,function(){"use strict";return function(t){return function(n){function e(t,n){if(b)return void s(b,"height: "+n+"px;");b=document.createElement("span"),s(b,"\n                position: absolute;\n                z-index: 10000000;\n                top:0;\n                right: 3px;\n                width: 3px; \n                height: "+n+"px; \n                background-color: #000;\n                border-radius: 1.5px;\n                transition: opacity .2s;\n                -webkit-transition: opacity .2s;\n                transform: translateZ(0.01px);\n                opacity: 0;\n            "),t.appendChild(b)}function o(t){var n=t,e=0;n<y?(e=4*(y-n),e>w-Y&&(e=w-Y),n=y):n>B&&(e=4*(n-B),e>w-Y&&(e=w-Y),n=B+e);var o=w-e;b.style.height=o+"px",E.transform(b,"translateY",n),E.transform(b,"translateZ",.01)}var r=n.Moved,a=(n.transform,n.getStyle),i=n.extend,s=n.cssText,l=n.getPropFromMatrix,c=n.getRelativeRect,u=n.isInElement,f=n.throwError,p=function(){},d=i({scrollBar:!0,bounce:!0,unidirectional:!1,pullDown:{use:!1,distance:50,onBegin:p,onActive:p,onAfter:p},loadMore:{distance:0,onLoadMore:p},onTouchMove:p,onTransMove:p,onTransMoveEnd:p},t),h=null,m=null,v=0,g=0,M=0,b=null,w=0,Y=7,S=0,D=0,x=0,T=0,y=0,B=0,E=new r,k=0,O=0,z="easeOutStrong",I=0,A=!1,F=!1,C=!1,L=!1,N=0,R=!1,X=!1,Z=!1,j=!1,q=!1,H=p,P={},G=!1,J=!1;return{init:function(t){h=t.el,m=h.parentNode,"static"===a(h,"position")&&s(h,"position: relative; z-index: 10;"),"static"===a(m,"position")&&s(m,"position: relative;"),this.refreshSize()},start:function(t){t.fingers[0];z="easeOutStrong",F=!1,j="stop"!==E.moveStatus,C=!1,L=!1,G=!1,J=!1,P={},k>S&&(k/=.5),E.stop(function(t){Z=!1,N=k=t.translateY})},move:function(t){if("start"===E.moveStatus)return!1;Z=!0;var n=t.fingers[0];if(!n.fingerInElement)return F||(F=!0,this.makeMove(n)),!1;if(P=n.direction,(P.top||P.bottom)&&!G&&Math.abs(n.distanceY)>=10&&(J=!0),(P.left||P.right)&&!J&&Math.abs(n.distanceX)>=10&&(G=!0),Math.abs(n.distanceY)<10&&Math.abs(n.distanceX)<10)return!1;if(J||!d.unidirectional){var e=n.distanceY>0?n.distanceY-10:n.distanceY+10;N=k+e,N>S||x>0?N=d.bounce?S+.5*(N-S):S:N<x&&(N=d.bounce?x+.5*(N-x):x),N<=T&&!X&&P.top&&(X=!0,d.loadMore.onLoadMore.call(this)),E.transform(n.el,"translateY",N),d.scrollBar&&(s(b,"opacity: .4;"),o(-N*M)),d.pullDown&&d.pullDown.use&&N>0&&!R&&d.pullDown.onBegin&&d.pullDown.onBegin.call(this,N),d.onTouchMove.call(this,N)}return!(J&&d.unidirectional||j)&&void 0},end:function(t){if(G&&!A)return!1;var n=t.fingers[0],e=t.changeFingerIndex,o=t.fingerNumber,r=n.fingerInElement;Z=!1,0===e&&0===o&&r&&this.makeMove(n)},cancel:function(t){var n=t.fingers[0],e=t.changeFingerIndex,o=t.fingerNumber,r=n.fingerInElement;0===e&&0===o&&r&&(k+=n.distanceY)},makeMove:function(t){function n(n){var o=Math.abs(n-k)/Math.abs(t.transDistanceY)*t.transTime;return o<500?(o=500,e=2):o>2e3&&(o=2e3),o}var e;if(I=t.transTime,k=N,O=k+t.transDistanceY,d.pullDown&&d.pullDown.use&&k>=d.pullDown.distance&&!R)return R=!0,d.pullDown.onActive&&d.pullDown.onActive.call(this),S+=d.pullDown.distance,void this.scrollTo(d.pullDown.distance,300);d.pullDown&&d.pullDown.use&&k>S&&(L=!0),k>S||x>0?(O=S,z="easeOutStrong",I=d.bounce?500:t.transTime,A=!0):k<x?(O=x,z="easeOutStrong",I=d.bounce?500:t.transTime,A=!0):O<x?d.bounce?(O=x,z="backOut",I=n(x)):z="easeOutStrong":O>S&&(d.bounce?(O=S,z="backOut",I=n(S)):z="easeOutStrong"),Math.abs(t.transDistanceY)>100||A?this.wrapMove(O,I,z,e):(d.scrollBar&&"start"!==E.moveStatus&&s(b,"opacity: 0;"),q&&this.refresh())},wrapMove:function(t,n,e,r){var a=this;E.start({el:h,target:{translateY:t},type:e,time:n,s:r||.7,inCallBack:function(t){k=t.translateY,d.bounce||(k>=S&&E.stop(function(t){k=S,E.transform(h,"translateY",k)}),k<=x&&E.stop(function(t){k=x,E.transform(h,"translateY",x)})),k<=T&&!X&&P.top&&(X=!0,d.loadMore.onLoadMore.call(a)),L&&d.pullDown.onAfter(t.translateY),d.scrollBar&&o(-t.translateY*M),d.onTransMove.call(this,k)},endCallBack:function(t){k=t.translateY,q&&a.refresh(),d.scrollBar&&s(b,"opacity: 0;"),d.onTransMoveEnd.call(this,k),j=!1,A=!1}})},scrollTo:function(t,n,e){var o;"string"==typeof t?o=document.querySelector(t):t instanceof Element&&(o=t),o&&(u(h,o)||f("ScrollTo function argument error, `child` must be a child of `parent`"),t=-c(h,o).top),e&&(t>S||x>0)?t=S:e&&t<x&&(t=x),N=k=t,E.stop(),this.wrapMove(t,n,"easeOutStrong")},loadEnd:function(){X=!1,this.refreshSize()},refresh:function(t){if("start"===E.moveStatus||Z)return q=!0,H=t,!1;(t||H)(),R=!1,q=!1,S=D,this.refreshSize(),l(h).translateY>S&&(L=!0,this.scrollTo(S,500))},refreshSize:function(){v=parseFloat(a(h,"height")),g=m.clientHeight,x=g-v,D=S=0,T=x<0?x+d.loadMore.distance:0,x>0&&(d.scrollBar=!1),d.scrollBar&&(M=g/v,w=g*M,Y=w<Y?w:Y,y=-S*M,B=-x*M,e(m,w))}}}}});