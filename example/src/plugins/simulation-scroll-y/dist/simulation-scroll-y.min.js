/*!
 * simulation-scroll-y.min.js v0.0.24
 * (c) 2017 HcySunYang
 * Released under the MIT License.
 */!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.simulationScrollY=t()}(this,function(){"use strict";return function(n){return function(t){function e(n,t){if(w)return void s(w,"height: "+t+"px;");w=document.createElement("span"),s(w,"\n                position: absolute;\n                top:0;\n                right: 3px;\n                width: 3px; \n                height: "+t+"px; \n                background-color: #000;\n                opacity: 0;\n                border-radius: 1.5px;\n                transition: opacity .2s;\n                -webkit-transition: opacity .2s;\n            "),n.appendChild(w)}function o(n){var t=n,e=0;t<x?(e=4*(x-t),e>b-D&&(e=b-D),t=x):t>B&&(e=4*(t-B),e>b-D&&(e=b-D),t=B+e);var o=b-e;w.style.height=o+"px",E.transform(w,"translateY",t)}var r=t.Moved,a=(t.transform,t.getStyle),i=t.extend,s=t.cssText,l=t.getPropFromMatrix,c=t.getRelativeRect,u=t.isInElement,f=t.throwError,p=function(){},d=i({scrollBar:!0,bounce:!0,pullDown:{use:!1,distance:50,onBegin:p,onActive:p,onAfter:p},loadMore:{distance:0,onLoadMore:p},onTouchMove:p,onTransMove:p,onTransMoveEnd:p},n),h=null,g=null,v=0,m=0,M=0,w=null,b=0,D=7,S=0,Y=0,T=0,y=0,x=0,B=0,E=new r,k=0,O=0,I="easeOutStrong",A=0,z=!1,F=!1,C=!1,L=!1,N=0,R=!1,j=!1,q=!1,H=!1,P=p,G={};return{init:function(n){h=n.el,g=h.parentNode,"static"===a(h,"position")&&s(h,"position: relative;"),"static"===a(g,"position")&&s(parent,"position: relative;"),this.refreshSize()},start:function(n){n.fingers[0];I="easeOutStrong",z=!1,F=!1,C=!1,L=!1,G={},k>S&&(k/=.5),E.stop(function(n){q=!1,N=k=n.translateY})},move:function(n){if("start"===E.moveStatus)return!1;q=!0;var t=n.fingers[0],e=t.fingerInElement;if(G=t.direction,N=k+t.distanceY,!e)return F||(F=!0,this.makeMove(t)),!1;N>S||T>0?N=d.bounce?S+.5*(N-S):S:N<T&&(N=d.bounce?T+.5*(N-T):T),N<=y&&!j&&G.top&&(j=!0,d.loadMore.onLoadMore.call(this)),E.transform(t.el,"translateY",N),d.scrollBar&&(s(w,"opacity: .4;"),o(-N*M)),d.pullDown&&d.pullDown.use&&N>0&&!R&&d.pullDown.onBegin&&d.pullDown.onBegin.call(this,N),d.onTouchMove.call(this,N)},end:function(n){var t=n.fingers[0],e=n.changeFingerIndex,o=n.fingerNumber,r=t.fingerInElement;q=!1,0===e&&0===o&&r&&this.makeMove(t)},cancel:function(n){var t=n.fingers[0],e=n.changeFingerIndex,o=n.fingerNumber,r=t.fingerInElement;0===e&&0===o&&r&&(k+=t.distanceY)},makeMove:function(n){function t(t){var o=Math.abs(t-k)/Math.abs(n.transDistanceY)*n.transTime;return o<500?(o=500,e=2):o>2e3&&(o=2e3),o}var e;if(A=n.transTime,k=N,O=k+n.transDistanceY,d.pullDown&&d.pullDown.use&&k>=d.pullDown.distance&&!R)return R=!0,d.pullDown.onActive&&d.pullDown.onActive.call(this),S+=d.pullDown.distance,void this.scrollTo(d.pullDown.distance,300);d.pullDown&&d.pullDown.use&&k>S&&(L=!0),k>S||T>0?(O=S,I="easeOutStrong",A=d.bounce?500:n.transTime,z=!0):k<T?(O=T,I="easeOutStrong",A=d.bounce?500:n.transTime,z=!0):O<T?d.bounce?(O=T,I="backOut",A=t(T)):I="easeOutStrong":O>S&&(d.bounce?(O=S,I="backOut",A=t(S)):I="easeOutStrong"),Math.abs(n.transDistanceY)>100||z?this.wrapMove(O,A,I,e):(d.scrollBar&&"start"!==E.moveStatus&&s(w,"opacity: 0;"),H&&this.refresh())},wrapMove:function(n,t,e,r){var a=this;E.start({el:h,target:{translateY:n},type:e,time:t,s:r||.7,inCallBack:function(n){k=n.translateY,d.bounce||(k>=S&&E.stop(function(n){k=S,E.transform(h,"translateY",k)}),k<=T&&E.stop(function(n){k=T,E.transform(h,"translateY",T)})),k<=y&&!j&&G.top&&(j=!0,d.loadMore.onLoadMore.call(a)),L&&d.pullDown.onAfter(n.translateY),d.scrollBar&&o(-n.translateY*M),d.onTransMove.call(this,k)},endCallBack:function(n){k=n.translateY,H&&a.refresh(),d.scrollBar&&s(w,"opacity: 0;"),d.onTransMoveEnd.call(this,k)}})},scrollTo:function(n,t,e){var o;"string"==typeof n?o=document.querySelector(n):n instanceof Element&&(o=n),o&&(u(h,o)||f("ScrollTo function argument error, `child` must be a child of `parent`"),n=-c(h,o).top),e&&(n>S||T>0)?n=S:e&&n<T&&(n=T),N=k=n,E.stop(),this.wrapMove(n,t,"easeOutStrong")},loadEnd:function(){j=!1,this.refreshSize()},refresh:function(n){if("start"===E.moveStatus||q)return H=!0,P=n,!1;(n||P)(),R=!1,H=!1,S=Y,this.refreshSize(),l(h).translateY>S&&(L=!0,this.scrollTo(S,500))},refreshSize:function(){v=parseFloat(a(h,"height")),m=g.clientHeight,T=m-v,Y=S=0,y=T<0?T+d.loadMore.distance:0,T>0&&(d.scrollBar=!1),d.scrollBar&&(M=m/v,b=m*M,D=b<D?b:D,x=-S*M,B=-T*M,e(g,b))}}}}});