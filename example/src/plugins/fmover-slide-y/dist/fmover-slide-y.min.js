/*!
 * fmover-slide-y.min.js v1.0.2
 * (c) 2017 HcySunYang
 * Released under the MIT License.
 */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.fmoverSlideY=e()}(this,function(){"use strict";return function(t){return function(e){var n=e.Moved,i=e.getStyle,o=e.extend,r=e.cssText,a=(e.getRelativeRect,e.isInElement,e.throwError,e.toArray),s={top:"top",bottom:"bottom"},l=null,h=null,d=null,c=0,u=0,f=0,x=0,p=0,v=0,m=new n,g=0,I=!1,y=null,b=!1,S=!1,C=function(){},Y=o({startSlide:1,autoplay:0,autoplayDir:s.top,loop:!0,times:500,bounce:!0,touchable:!0,onInit:C,onTouchStart:C,onTouchMove:C,onTouchEnd:C,onTransStart:C,onTransMove:C,onTransEnd:C,onChangeStart:C,onChange:C,onChangeEnd:C,onRefresh:C},t);return{index:1,get slideIndex(){return this.redressIndex(this.index)},get slideNumber(){return c},init:function(t){l=t.el,h=l.parentNode,this.refreshWrap(!0),Y.onInit.call(this)},start:function(t){if(0!==t.changeFingerIndex||!Y.touchable)return!1;I=!1,S=!1,clearInterval(y),m.stop(function(t){p=t.translateY}),Y.autoplay&&clearInterval(y),this.index>c?(p+=c*f,this.index=1):0===this.index&&(this.index=c,p-=c*f),m.transform(l,"translateY",p),Y.onTouchStart.call(this,p)},move:function(t){var e=t.fingers[0];return!!Y.touchable&&(e.fingerInElement?(v=p+e.distanceY,Y.loop||(v>0?v=Y.bounce?.5*v:0:v<g&&(v=Y.bounce?g+.5*(v-g):g)),console.log(v),m.transform(l,"translateY",v),void Y.onTouchMove.call(this,v)):(I||(I=!0,this.wrapMove(e),Y.autoplay&&(clearInterval(y),this.initAutoplay()),Y.onTouchEnd.call(this)),!1))},end:function(t){var e=t.fingers[0];if(!e.fingerInElement||0!==t.changeFingerIndex||0!==t.fingerNumber||!Y.touchable)return!1;p=v,this.wrapMove(e),Y.autoplay&&(clearInterval(y),this.initAutoplay()),Y.onTouchEnd.call(this)},cancel:function(t){if(!Y.touchable)return!1;Y.autoplay&&(clearInterval(y),this.initAutoplay()),this.makeMove()},refresh:function(t){this.refreshWrap(t),Y.onRefresh.call(this,c)},refreshWrap:function(t){if(t&&m&&m.stop(function(){b=!1}),a(document.querySelectorAll("[clone=true]")).forEach(function(t){t.parentNode.removeChild(t)}),d=Array.prototype.slice.call(l.querySelectorAll("div")),c=d.length,f=parseInt(i(h,"height")),this.index=t?this.limitIndex(Y.startSlide):this.limitIndex(this.index),Y.loop){var e=d[0],n=d[c-1],o=e.cloneNode(!0);o.setAttribute("clone",!0);var s=n.cloneNode(!0);s.setAttribute("clone",!0),l.appendChild(o),l.insertBefore(s,l.firstElementChild),d.push(o),d.unshift(s),p=-this.index*f}else p=-(this.index-1)*f;u=d.length,x=f*u,Y.loop||(g=-(x-f)),r(h,"overflow: hidden;"),r(l,"height: "+x+"px; width: 100%; overflow: hidden;"),m.transform(l,"translateY",p),d.forEach(function(t,e,n){r(t,"width: 100%; height: "+f+"px;")}),Y.autoplay&&(clearInterval(y),this.initAutoplay())},prev:function(){if(b)return!1;b=!0,this.index--,Y.loop||0!==this.index||(this.index=c),this.onChangeStart(this.redressIndex(this.index),s.top),this.makeMove()},next:function(){if(b)return!1;b=!0,this.index++,!Y.loop&&this.index>c&&(this.index=1),this.onChangeStart(this.redressIndex(this.index),s.bottom),this.makeMove()},slideTo:function(t,e){if(b||this.slideIndex===t)return!1;if(b=!0,this.index!==t){var n=this.index>t?s.bottom:s.top;this.index=this.limitIndex(t),this.onChangeStart(this.redressIndex(this.index),n),this.makeMove(e)}},initAutoplay:function(){var t=this;y=setInterval(function(){Y.autoplayDir===s.top?t.next():t.prev()},Y.autoplay)},wrapMove:function(t){t.direction.top&&Math.abs(t.yv)>.5&&t.distanceY<0||t.distanceY<-f/2?(this.index++,this.onChangeStart(this.redressIndex(this.index),s.top)):(t.direction.bottom&&Math.abs(t.yv)>.5&&t.distanceY>0||t.distanceY>f/2)&&(this.index--,this.onChangeStart(this.redressIndex(this.index),s.bottom)),this.makeMove()},makeMove:function(t){var e=this;Y.onTransStart.call(this,p),Y.loop?(this.index<0?this.index=0:this.index>c+1&&(this.index=c+1),p=-this.index*f):(this.index<1?this.index=1:this.index>c&&(this.index=c),p=-(this.index-1)*f),m.start({el:l,target:{translateY:p},inCallBack:function(t){Y.onTransMove.call(e,t.translateY),S&&Y.onChange.call(e,t.translateY)},endCallBack:function(t){b=!1,Y.loop&&e.index>c?(p+=c*f,m.transform(l,"translateY",p),e.index=1):Y.loop&&0===e.index&&(e.index=c,p-=c*f,m.transform(l,"translateY",p)),Y.onTransEnd.call(e,t.translateY),S&&Y.onChangeEnd.call(e,t.translateY)},time:void 0===t?Y.times:t})},onChangeStart:function(t,e){S=!0,Y.onChangeStart.call(this,t,e)},redressIndex:function(t){return 0===t?c:t>c?1:t},limitIndex:function(t){return t>c?c:t<1?1:t}}}}});